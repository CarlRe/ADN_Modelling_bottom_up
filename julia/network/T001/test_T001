#Test f√ºr erste Versuche mit UW Osterburken Trafo 1

using PowerDynamics: read_powergrid, Json, Inc, find_operationpoint, NodeParameterChange, ChangeInitialConditions, LineFailure, PowerPerturbation, simulate
using Plots

powergrid = read_powergrid(joinpath(@__DIR__,"gridT001.json"), Json)
operationpoint = find_operationpoint(powergrid,sol_method = :nlsolve)

timespan= (0.0,7.)
#include("plot.jl")

# simulating a Power perturbation at bus3 
fault1 = PowerPerturbation(node="bus3", fault_power=0.3, tspan_fault=(0.5,4.5), var=:P)
solution1 = simulate(fault1, powergrid, operationpoint, timespan)
fault2 = PowerPerturbation(node="bus5", fault_power=0.0, tspan_fault=(1.,5.), var=:P)
solution2 = simulate(fault2, powergrid, operationpoint, timespan)
plot(solution2.dqsol)
